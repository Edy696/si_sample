CREATE SEQUENCE APP.car_sequence START WITH 1;
CREATE SEQUENCE APP.part_sequence START WITH 1;
CREATE SEQUENCE APP.periode_sequence START WITH 1;
CREATE SEQUENCE APP.service_sequence START WITH 1;


CREATE TABLE APP.CAR (
	CAR_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
	NAME VARCHAR(25),
	PHOTO VARCHAR(50),
	PRIMARY KEY (CAR_ID)
);


CREATE TABLE APP.SERVICE (
	SERVICE_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
	NAME VARCHAR(25),
	PERIODE VARCHAR(25),
	CAR_ID INTEGER,
	PRIMARY KEY (SERVICE_ID),
	CONSTRAINT fk_car_carid
		FOREIGN KEY (CAR_ID) 
		REFERENCES CAR(CAR_ID)
		ON DELETE CASCADE		
);


CREATE TABLE APP.PART (
	PART_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
	PART_NUMBER VARCHAR(50),
	PART_NAME VARCHAR(50),
	PRICE DOUBLE,
	CAR_ID INTEGER,
	PRIMARY KEY (PART_ID),
	CONSTRAINT fk_part_car_carid
		FOREIGN KEY (CAR_ID) 
		REFERENCES CAR(CAR_ID)
		ON DELETE CASCADE		
);

CREATE TABLE APP.PART_SERVICE (
	PART_SERVICE_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL,
	PART_ID INTEGER,
	SERVICE_ID INTEGER,
	QTY INTEGER,
	TOTAL DOUBLE,
	PRIMARY KEY (PART_SERVICE_ID),
	CONSTRAINT fk_part_service_partid
		FOREIGN KEY (PART_ID) 
		REFERENCES PART(PART_ID)
		ON DELETE RESTRICT,
	CONSTRAINT fk_part_service_serviceid
		FOREIGN KEY (SERVICE_ID) 
		REFERENCES SERVICE(SERVICE_ID)
		ON DELETE RESTRICT
);




